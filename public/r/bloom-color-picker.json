{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "bloom-color-picker",
  "type": "registry:component",
  "title": "Bloom Color Picker",
  "description": "A beautiful flower-petal color picker with radial hue selection, saturation and brightness arcs.",
  "dependencies": ["motion"],
  "files": [
    {
      "path": "registry/new-york/bloom-color-picker/bloom-color-picker.tsx",
      "content": "'use client';\n\nimport { useId, useState } from 'react';\nimport { motion } from 'motion/react';\n\nconst hslToHex = (h: number, s: number, l: number) => {\n  l /= 100;\n  const a = (s * Math.min(l, 1 - l)) / 100;\n  const f = (n: number) => {\n    const k = (n + h / 30) % 12;\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n    return Math.round(255 * color)\n      .toString(16)\n      .padStart(2, '0');\n  };\n  return `#${f(0)}${f(8)}${f(4)}`;\n};\n\n// Saturation arc geometry\nconst SAT_ARC_RADIUS = 80;\nconst SAT_ARC_START = (-35 * Math.PI) / 180;\nconst SAT_ARC_END = (35 * Math.PI) / 180;\n\nconst polarToCartesian = (angle: number, radius: number) => ({\n  x: Math.cos(angle) * radius,\n  y: Math.sin(angle) * radius,\n});\n\nconst satArcPath = (() => {\n  const start = polarToCartesian(SAT_ARC_START, SAT_ARC_RADIUS);\n  const end = polarToCartesian(SAT_ARC_END, SAT_ARC_RADIUS);\n  return `M ${start.x},${start.y} A ${SAT_ARC_RADIUS},${SAT_ARC_RADIUS} 0 0 1 ${end.x},${end.y}`;\n})();\n\n// Brightness arc geometry\nconst BRIGHT_ARC_RADIUS = 80;\nconst BRIGHT_ARC_START = (55 * Math.PI) / 180;\nconst BRIGHT_ARC_END = (125 * Math.PI) / 180;\n\nconst brightArcPath = (() => {\n  const start = polarToCartesian(BRIGHT_ARC_START, BRIGHT_ARC_RADIUS);\n  const end = polarToCartesian(BRIGHT_ARC_END, BRIGHT_ARC_RADIUS);\n  return `M ${start.x},${start.y} A ${BRIGHT_ARC_RADIUS},${BRIGHT_ARC_RADIUS} 0 0 1 ${end.x},${end.y}`;\n})();\n\nexport default function BloomColorPicker({\n  stagger = false,\n}: {\n  stagger?: boolean;\n}) {\n  const uid = useId().replace(/:/g, '');\n  const [active, setActive] = useState(false);\n  const [hsl, setHsl] = useState({ h: 0, s: 100, l: 50 });\n\n  const totalCircles = 16;\n  const arcCoverage = 360;\n\n  const hexColor = hslToHex(hsl.h, hsl.s, hsl.l);\n\n  // Saturation thumb position along the arc\n  const satThumbAngle =\n    SAT_ARC_START + (hsl.s / 100) * (SAT_ARC_END - SAT_ARC_START);\n  const satThumb = polarToCartesian(satThumbAngle, SAT_ARC_RADIUS);\n\n  // Brightness thumb position along the arc\n  const brightThumbAngle =\n    BRIGHT_ARC_START + (hsl.l / 100) * (BRIGHT_ARC_END - BRIGHT_ARC_START);\n  const brightThumb = polarToCartesian(brightThumbAngle, BRIGHT_ARC_RADIUS);\n\n  const updateSatFromPointer = (e: React.PointerEvent) => {\n    const svg = (e.target as Element).closest('svg');\n    if (!svg) return;\n    const rect = svg.getBoundingClientRect();\n    const cx = rect.left + rect.width / 2;\n    const cy = rect.top + rect.height / 2;\n    const angle = Math.atan2(e.clientY - cy, e.clientX - cx);\n    const clamped = Math.max(SAT_ARC_START, Math.min(SAT_ARC_END, angle));\n    const s = ((clamped - SAT_ARC_START) / (SAT_ARC_END - SAT_ARC_START)) * 100;\n    setHsl((prev) => ({ ...prev, s }));\n  };\n\n  const updateBrightFromPointer = (e: React.PointerEvent) => {\n    const svg = (e.target as Element).closest('svg');\n    if (!svg) return;\n    const rect = svg.getBoundingClientRect();\n    const cx = rect.left + rect.width / 2;\n    const cy = rect.top + rect.height / 2;\n    const angle = Math.atan2(e.clientY - cy, e.clientX - cx);\n    const clamped = Math.max(BRIGHT_ARC_START, Math.min(BRIGHT_ARC_END, angle));\n    const l =\n      ((clamped - BRIGHT_ARC_START) / (BRIGHT_ARC_END - BRIGHT_ARC_START)) *\n      100;\n    setHsl((prev) => ({ ...prev, l }));\n  };\n\n  return (\n    <div className=\"relative flex items-center justify-center\">\n      <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n        {Array.from({ length: totalCircles }).map((_, i) => {\n          const angle = (i * arcCoverage) / totalCircles;\n          const radian = (angle * Math.PI) / 180;\n          const hex = hslToHex(angle, 100, 50);\n\n          return (\n            // petals\n            <motion.div\n              key={i}\n              initial={{ x: 0, y: 0, opacity: 0 }}\n              animate={\n                active\n                  ? {\n                      x: Math.cos(radian) * 60,\n                      y: Math.sin(radian) * 60,\n                      opacity: 1,\n                    }\n                  : { x: 0, y: 0, opacity: 0.9 }\n              }\n              transition={{ duration: 0.5, delay: stagger ? i * 0.05 : 0 }}\n              style={{ backgroundColor: hex }}\n              className=\"petal absolute w-8 h-8 rounded-full cursor-pointer pointer-events-auto \"\n              onClick={() => setHsl((prev) => ({ ...prev, h: angle }))}\n            />\n          );\n        })}\n        {/* saturation arc*/}\n        <motion.svg\n          width=\"230\"\n          height=\"200\"\n          viewBox=\"-100 -100 200 200\"\n          className=\"absolute pointer-events-none \"\n          style={{\n            left: '50%',\n            top: '50%',\n            marginLeft: '-95px',\n            marginTop: '-100px',\n          }}\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={\n            active ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.8 }\n          }\n          transition={{ duration: 0.5 }}\n        >\n          <defs>\n            <linearGradient id={`sat-${uid}`} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n              <stop offset=\"0%\" stopColor={hslToHex(hsl.h, 0, hsl.l)} />\n              <stop offset=\"100%\" stopColor={hslToHex(hsl.h, 100, hsl.l)} />\n            </linearGradient>\n          </defs>\n          {/* invisible wider hit area */}\n          <path\n            d={satArcPath}\n            stroke=\"transparent\"\n            strokeWidth={28}\n            fill=\"none\"\n            className=\"pointer-events-auto cursor-pointer\"\n            onPointerDown={(e) => {\n              (e.target as Element).setPointerCapture(e.pointerId);\n              updateSatFromPointer(e);\n            }}\n            onPointerMove={(e) => {\n              if (e.buttons === 1) updateSatFromPointer(e);\n            }}\n          />\n          {/* visible gradient arc */}\n          <path\n            d={satArcPath}\n            stroke={`url(#sat-${uid})`}\n            strokeWidth={14}\n            strokeLinecap=\"round\"\n            fill=\"none\"\n            className=\"pointer-events-none\"\n          />\n          {/* thumb */}\n          <motion.circle\n            cx={satThumb.x}\n            cy={satThumb.y}\n            r={8}\n            fill=\"white\"\n            className=\"pointer-events-none\"\n            style={{\n              filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.3))',\n            }}\n            animate={{ cx: satThumb.x, cy: satThumb.y }}\n            transition={{ duration: 0.1 }}\n          />\n        </motion.svg>\n        {/* brightness arc (SVG) */}\n        <motion.svg\n          width=\"190\"\n          height=\"230\"\n          viewBox=\"-100 -100 200 200\"\n          className=\"absolute pointer-events-none\"\n          style={{\n            left: '50%',\n            top: '50%',\n            marginLeft: '-95px',\n            marginTop: '-100px',\n          }}\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={\n            active ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 0.8 }\n          }\n          transition={{ duration: 0.5 }}\n        >\n          <defs>\n            <linearGradient id={`bright-${uid}`} x1=\"1\" y1=\"0\" x2=\"0\" y2=\"0\">\n              <stop offset=\"0%\" stopColor=\"#000000\" />\n              <stop offset=\"50%\" stopColor={hslToHex(hsl.h, hsl.s, 50)} />\n              <stop offset=\"100%\" stopColor=\"#ffffff\" />\n            </linearGradient>\n          </defs>\n          {/* invisible wider hit area for brightness */}\n          <path\n            d={brightArcPath}\n            stroke=\"transparent\"\n            strokeWidth={28}\n            fill=\"none\"\n            className=\"pointer-events-auto cursor-pointer\"\n            onPointerDown={(e) => {\n              (e.target as Element).setPointerCapture(e.pointerId);\n              updateBrightFromPointer(e);\n            }}\n            onPointerMove={(e) => {\n              if (e.buttons === 1) updateBrightFromPointer(e);\n            }}\n          />\n          {/* visible gradient arc for brightness */}\n          <path\n            d={brightArcPath}\n            stroke={`url(#bright-${uid})`}\n            strokeWidth={14}\n            strokeLinecap=\"round\"\n            fill=\"none\"\n            className=\"pointer-events-none\"\n          />\n          {/* brightness thumb */}\n          <motion.circle\n            cx={brightThumb.x}\n            cy={brightThumb.y}\n            r={8}\n            fill=\"white\"\n            className=\"pointer-events-none\"\n            style={{\n              filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.3))',\n            }}\n            animate={{ cx: brightThumb.x, cy: brightThumb.y }}\n            transition={{ duration: 0.1 }}\n          />\n        </motion.svg>\n      </div>\n      {/* center color button */}\n      <motion.div\n        className=\"relative z-10 w-8 h-8 border-2 border-white cursor-pointer shadow-md\"\n        style={{ backgroundColor: hexColor }}\n        animate={\n          active\n            ? { rotate: 90, borderRadius: '100%' }\n            : { rotate: 0, borderRadius: '20%' }\n        }\n        onClick={() => setActive(!active)}\n      ></motion.div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}
