{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "hold-button",
  "type": "registry:component",
  "title": "Hold Button",
  "description": "A confirmation button that fills up while being held, perfect for destructive or irreversible actions.",
  "dependencies": [
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "registry/new-york/hold-button/hold-button.tsx",
      "content": "\"use client\";\r\n\r\nimport { useRef, useState, useCallback, useEffect } from \"react\";\r\nimport { cn } from \"./utils\";\r\n\r\ninterface HoldButtonProps {\r\n  /** Text shown initially */\r\n  label?: string;\r\n  /** Text shown while holding */\r\n  holdingLabel?: string;\r\n  /** Text shown after action completes */\r\n  completedLabel?: string;\r\n  /** Duration in milliseconds to hold before action triggers */\r\n  holdDuration?: number;\r\n  /** Callback when hold completes */\r\n  onConfirm?: () => void;\r\n  /** Visual variant */\r\n  variant?: \"destructive\" | \"warning\" | \"default\";\r\n  /** Button size */\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  /** Whether the button is disabled */\r\n  disabled?: boolean;\r\n  /** Additional class names */\r\n  className?: string;\r\n}\r\n\r\nconst HoldButton = ({\r\n  label = \"Hold to Delete\",\r\n  holdingLabel = \"Keep holding...\",\r\n  completedLabel = \"Deleted!\",\r\n  holdDuration = 1500,\r\n  onConfirm,\r\n  variant = \"destructive\",\r\n  size = \"md\",\r\n  disabled = false,\r\n  className,\r\n}: HoldButtonProps) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [isHolding, setIsHolding] = useState(false);\r\n  const [isCompleted, setIsCompleted] = useState(false);\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n  const startTimeRef = useRef<number | null>(null);\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  const variantStyles = {\r\n    destructive: {\r\n      base: \"bg-gradient-to-r from-red-500/10 to-red-600/10 border-red-500/30 text-red-500 hover:border-red-500/50\",\r\n      fill: \"bg-gradient-to-r from-red-500 to-red-600\",\r\n      completed: \"bg-gradient-to-r from-red-600 to-red-700 border-red-600 text-white\",\r\n      glow: \"shadow-red-500/25\",\r\n    },\r\n    warning: {\r\n      base: \"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border-amber-500/30 text-amber-500 hover:border-amber-500/50\",\r\n      fill: \"bg-gradient-to-r from-amber-500 to-orange-500\",\r\n      completed: \"bg-gradient-to-r from-amber-600 to-orange-600 border-amber-600 text-white\",\r\n      glow: \"shadow-amber-500/25\",\r\n    },\r\n    default: {\r\n      base: \"bg-gradient-to-r from-primary/10 to-primary/10 border-primary/30 text-primary hover:border-primary/50\",\r\n      fill: \"bg-gradient-to-r from-primary to-primary\",\r\n      completed: \"bg-primary border-primary text-primary-foreground\",\r\n      glow: \"shadow-primary/25\",\r\n    },\r\n  };\r\n\r\n  const sizeStyles = {\r\n    sm: \"h-9 px-4 text-sm min-w-[120px]\",\r\n    md: \"h-11 px-6 text-base min-w-[160px]\",\r\n    lg: \"h-14 px-8 text-lg min-w-[200px]\",\r\n  };\r\n\r\n  const updateProgress = useCallback(() => {\r\n    if (!startTimeRef.current) return;\r\n\r\n    const elapsed = Date.now() - startTimeRef.current;\r\n    const newProgress = Math.min((elapsed / holdDuration) * 100, 100);\r\n\r\n    setProgress(newProgress);\r\n\r\n    if (newProgress >= 100) {\r\n      // Action triggered!\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n        intervalRef.current = null;\r\n      }\r\n      setIsHolding(false);\r\n      setIsCompleted(true);\r\n      onConfirm?.();\r\n\r\n      // Reset after showing completed state\r\n      setTimeout(() => {\r\n        setIsCompleted(false);\r\n        setProgress(0);\r\n      }, 1500);\r\n    }\r\n  }, [holdDuration, onConfirm]);\r\n\r\n  const startHold = useCallback(() => {\r\n    if (disabled || isCompleted) return;\r\n\r\n    setIsHolding(true);\r\n    startTimeRef.current = Date.now();\r\n\r\n    // Use requestAnimationFrame-based interval for smooth animation\r\n    intervalRef.current = setInterval(() => {\r\n      updateProgress();\r\n    }, 16); // ~60fps\r\n  }, [disabled, isCompleted, updateProgress]);\r\n\r\n  const cancelHold = useCallback(() => {\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    setIsHolding(false);\r\n    startTimeRef.current = null;\r\n\r\n    // Animate progress back to 0\r\n    const currentProgress = progress;\r\n    const steps = 20;\r\n    const stepDuration = 200 / steps;\r\n    let step = 0;\r\n\r\n    const animateBack = setInterval(() => {\r\n      step++;\r\n      const newProgress = currentProgress * (1 - step / steps);\r\n      setProgress(Math.max(0, newProgress));\r\n\r\n      if (step >= steps) {\r\n        clearInterval(animateBack);\r\n        setProgress(0);\r\n      }\r\n    }, stepDuration);\r\n  }, [progress]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const currentLabel = isCompleted\r\n    ? completedLabel\r\n    : isHolding\r\n    ? holdingLabel\r\n    : label;\r\n\r\n  const styles = variantStyles[variant];\r\n\r\n  return (\r\n    <button\r\n      ref={buttonRef}\r\n      className={cn(\r\n        // Base styles\r\n        \"relative overflow-hidden rounded-lg border-2 font-semibold\",\r\n        \"transition-all duration-300 ease-out\",\r\n        \"select-none cursor-pointer\",\r\n        \"focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2\",\r\n        // Size\r\n        sizeStyles[size],\r\n        // State-based styles\r\n        isCompleted\r\n          ? styles.completed\r\n          : styles.base,\r\n        // Holding state - add glow\r\n        isHolding && `shadow-lg ${styles.glow}`,\r\n        // Disabled state\r\n        disabled && \"opacity-50 cursor-not-allowed\",\r\n        className\r\n      )}\r\n      onMouseDown={startHold}\r\n      onMouseUp={cancelHold}\r\n      onMouseLeave={cancelHold}\r\n      onTouchStart={startHold}\r\n      onTouchEnd={cancelHold}\r\n      disabled={disabled}\r\n      type=\"button\"\r\n    >\r\n      {/* Progress fill layer */}\r\n      <div\r\n        className={cn(\r\n          \"absolute inset-0 origin-left transition-transform duration-75\",\r\n          styles.fill\r\n        )}\r\n        style={{\r\n          transform: `scaleX(${progress / 100})`,\r\n        }}\r\n      />\r\n\r\n      {/* Shimmer effect during hold */}\r\n      {isHolding && (\r\n        <div\r\n          className=\"absolute inset-0 bg-linear-to-r from-transparent via-white/20 to-transparent animate-shimmer\"\r\n          style={{\r\n            backgroundSize: \"200% 100%\",\r\n            animation: \"shimmer 1s infinite linear\",\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Label */}\r\n      <span\r\n        className={cn(\r\n          \"relative z-10 flex items-center justify-center gap-2\",\r\n          \"transition-all duration-200\",\r\n          // Make text white when more than 50% filled\r\n          progress > 50 && !isCompleted && \"text-white\"\r\n        )}\r\n      >\r\n        {/* Icon based on state */}\r\n        {isCompleted ? (\r\n          <svg\r\n            className=\"w-5 h-5 animate-in zoom-in-50 duration-300\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth={2.5}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M5 13l4 4L19 7\"\r\n            />\r\n          </svg>\r\n        ) : isHolding ? (\r\n          <svg\r\n            className=\"w-5 h-5 animate-pulse\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth={2}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.07 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n            />\r\n          </svg>\r\n        ) : null}\r\n        {currentLabel}\r\n      </span>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default HoldButton;\r\n\r\n// Add shimmer keyframes to your global CSS:\r\n// @keyframes shimmer {\r\n//   0% { background-position: 200% 0; }\r\n//   100% { background-position: -200% 0; }\r\n// }\r\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/hold-button/utils.ts",
      "content": "import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n",
      "type": "registry:lib"
    }
  ],
  "css": {
    "@keyframes shimmer": {
      "0%": {
        "background-position": "200% 0"
      },
      "100%": {
        "background-position": "-200% 0"
      }
    },
    ".animate-shimmer": {
      "animation": "shimmer 1s infinite linear",
      "background-size": "200% 100%"
    }
  }
}