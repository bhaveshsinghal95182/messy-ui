{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "hold-button",
  "type": "registry:component",
  "title": "Hold Button",
  "description": "A confirmation button that fills up while being held, perfect for destructive or irreversible actions.",
  "dependencies": ["clsx", "tailwind-merge"],
  "files": [
    {
      "path": "registry/new-york/hold-button/hold-button.tsx",
      "content": "'use client';\n\nimport { useRef, useState, useCallback, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface HoldButtonProps {\n  /** Text shown initially */\n  label?: string;\n  /** Text shown while holding */\n  holdingLabel?: string;\n  /** Text shown after action completes */\n  completedLabel?: string;\n  /** Duration in milliseconds to hold before action triggers */\n  holdDuration?: number;\n  /** Callback when hold completes */\n  onConfirm?: () => void;\n  /** Visual variant */\n  variant?: 'destructive' | 'warning' | 'default';\n  /** Button size */\n  size?: 'sm' | 'md' | 'lg';\n  /** Whether the button is disabled */\n  disabled?: boolean;\n  /** Additional class names */\n  className?: string;\n}\n\nconst HoldButton = ({\n  label = 'Hold to Delete',\n  holdingLabel = 'Keep holding...',\n  completedLabel = 'Deleted!',\n  holdDuration = 1500,\n  onConfirm,\n  variant = 'destructive',\n  size = 'md',\n  disabled = false,\n  className,\n}: HoldButtonProps) => {\n  const [progress, setProgress] = useState(0);\n  const [isHolding, setIsHolding] = useState(false);\n  const [isCompleted, setIsCompleted] = useState(false);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n  const startTimeRef = useRef<number | null>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const variantStyles = {\n    destructive: {\n      base: 'bg-gradient-to-r from-red-500/10 to-red-600/10 border-red-500/30 text-red-500 hover:border-red-500/50',\n      fill: 'bg-gradient-to-r from-red-500 to-red-600',\n      completed:\n        'bg-gradient-to-r from-red-600 to-red-700 border-red-600 text-white',\n      glow: 'shadow-red-500/25',\n    },\n    warning: {\n      base: 'bg-gradient-to-r from-amber-500/10 to-orange-500/10 border-amber-500/30 text-amber-500 hover:border-amber-500/50',\n      fill: 'bg-gradient-to-r from-amber-500 to-orange-500',\n      completed:\n        'bg-gradient-to-r from-amber-600 to-orange-600 border-amber-600 text-white',\n      glow: 'shadow-amber-500/25',\n    },\n    default: {\n      base: 'bg-gradient-to-r from-primary/10 to-primary/10 border-primary/30 text-primary hover:border-primary/50',\n      fill: 'bg-gradient-to-r from-primary to-primary',\n      completed: 'bg-primary border-primary text-primary-foreground',\n      glow: 'shadow-primary/25',\n    },\n  };\n\n  const sizeStyles = {\n    sm: 'h-9 px-4 text-sm min-w-[120px]',\n    md: 'h-11 px-6 text-base min-w-[160px]',\n    lg: 'h-14 px-8 text-lg min-w-[200px]',\n  };\n\n  const updateProgress = useCallback(() => {\n    if (!startTimeRef.current) return;\n\n    const elapsed = Date.now() - startTimeRef.current;\n    const newProgress = Math.min((elapsed / holdDuration) * 100, 100);\n\n    setProgress(newProgress);\n\n    if (newProgress >= 100) {\n      // Action triggered!\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      setIsHolding(false);\n      setIsCompleted(true);\n      onConfirm?.();\n\n      // Reset after showing completed state\n      setTimeout(() => {\n        setIsCompleted(false);\n        setProgress(0);\n      }, 1500);\n    }\n  }, [holdDuration, onConfirm]);\n\n  const startHold = useCallback(() => {\n    if (disabled || isCompleted) return;\n\n    setIsHolding(true);\n    startTimeRef.current = Date.now();\n\n    // Use requestAnimationFrame-based interval for smooth animation\n    intervalRef.current = setInterval(() => {\n      updateProgress();\n    }, 16); // ~60fps\n  }, [disabled, isCompleted, updateProgress]);\n\n  const cancelHold = useCallback(() => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setIsHolding(false);\n    startTimeRef.current = null;\n\n    // Animate progress back to 0\n    const currentProgress = progress;\n    const steps = 20;\n    const stepDuration = 200 / steps;\n    let step = 0;\n\n    const animateBack = setInterval(() => {\n      step++;\n      const newProgress = currentProgress * (1 - step / steps);\n      setProgress(Math.max(0, newProgress));\n\n      if (step >= steps) {\n        clearInterval(animateBack);\n        setProgress(0);\n      }\n    }, stepDuration);\n  }, [progress]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  const currentLabel = isCompleted\n    ? completedLabel\n    : isHolding\n      ? holdingLabel\n      : label;\n\n  const styles = variantStyles[variant];\n\n  return (\n    <button\n      ref={buttonRef}\n      className={cn(\n        // Base styles\n        'relative overflow-hidden rounded-lg border-2 font-semibold',\n        'transition-all duration-300 ease-out',\n        'select-none cursor-pointer',\n        'focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',\n        // Size\n        sizeStyles[size],\n        // State-based styles\n        isCompleted ? styles.completed : styles.base,\n        // Holding state - add glow\n        isHolding && `shadow-lg ${styles.glow}`,\n        // Disabled state\n        disabled && 'opacity-50 cursor-not-allowed',\n        className\n      )}\n      onMouseDown={startHold}\n      onMouseUp={cancelHold}\n      onMouseLeave={cancelHold}\n      onTouchStart={startHold}\n      onTouchEnd={cancelHold}\n      disabled={disabled}\n      type=\"button\"\n    >\n      {/* Progress fill layer */}\n      <div\n        className={cn(\n          'absolute inset-0 origin-left transition-transform duration-75',\n          styles.fill\n        )}\n        style={{\n          transform: `scaleX(${progress / 100})`,\n        }}\n      />\n\n      {/* Shimmer effect during hold */}\n      {isHolding && (\n        <div\n          className=\"absolute inset-0 bg-linear-to-r from-transparent via-white/20 to-transparent animate-shimmer\"\n          style={{\n            backgroundSize: '200% 100%',\n            animation: 'shimmer 1s infinite linear',\n          }}\n        />\n      )}\n\n      {/* Label */}\n      <span\n        className={cn(\n          'relative z-10 flex items-center justify-center gap-2',\n          'transition-all duration-200',\n          // Make text white when more than 50% filled\n          progress > 50 && !isCompleted && 'text-white'\n        )}\n      >\n        {/* Icon based on state */}\n        {isCompleted ? (\n          <svg\n            className=\"w-5 h-5 animate-in zoom-in-50 duration-300\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            strokeWidth={2.5}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M5 13l4 4L19 7\"\n            />\n          </svg>\n        ) : isHolding ? (\n          <svg\n            className=\"w-5 h-5 animate-pulse\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            strokeWidth={2}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.07 16.5c-.77.833.192 2.5 1.732 2.5z\"\n            />\n          </svg>\n        ) : null}\n        {currentLabel}\n      </span>\n    </button>\n  );\n};\n\nexport default HoldButton;\n\n// Add shimmer keyframes to your global CSS:\n// @keyframes shimmer {\n//   0% { background-position: 200% 0; }\n//   100% { background-position: -200% 0; }\n// }\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/hold-button/utils.ts",
      "content": "import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n",
      "type": "registry:lib"
    }
  ],
  "css": {
    "@keyframes shimmer": {
      "0%": {
        "background-position": "200% 0"
      },
      "100%": {
        "background-position": "-200% 0"
      }
    },
    ".animate-shimmer": {
      "animation": "shimmer 1s infinite linear",
      "background-size": "200% 100%"
    }
  }
}
