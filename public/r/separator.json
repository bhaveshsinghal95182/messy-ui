{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "separator",
  "type": "registry:component",
  "title": "Separator",
  "description": "An interactive separator with a wobbling string animation. The line bends toward the mouse cursor and oscillates with a satisfying spring effect when released.",
  "dependencies": [
    "gsap"
  ],
  "files": [
    {
      "path": "registry/new-york/separator/separator.tsx",
      "content": "\"use client\";\r\nimport { useRef, useEffect, useCallback } from \"react\";\r\nimport gsap from \"gsap\";\r\n\r\n// Fixed internal coordinate system for SVG\r\nconst VIEWBOX_WIDTH = 1000;\r\nconst VIEWBOX_HEIGHT = 100;\r\n\r\ninterface SeparatorProps {\r\n  /** Base Y position of the line (0-100) */\r\n  baseY?: number;\r\n  /** Maximum displacement when mouse hovers */\r\n  maxDisplacement?: number;\r\n  /** Height of the hover detection zone in pixels */\r\n  hoverZoneHeight?: number;\r\n  /** Stroke width of the line */\r\n  strokeWidth?: number;\r\n  /** Damping factor (0-1, lower = more oscillations) */\r\n  damping?: number;\r\n  /** Oscillation frequency */\r\n  frequency?: number;\r\n  /** Duration of the wobble animation in seconds */\r\n  duration?: number;\r\n  /** Additional CSS classes */\r\n  className?: string;\r\n}\r\n\r\nexport function Separator({\r\n  baseY = 50,\r\n  maxDisplacement = 40,\r\n  hoverZoneHeight = 100,\r\n  strokeWidth = 2,\r\n  damping = 0.15,\r\n  frequency = 8,\r\n  duration = 1.5,\r\n  className = \"\",\r\n}: SeparatorProps) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const pathRef = useRef<SVGPathElement | null>(null);\r\n\r\n  // Animation state refs\r\n  const stateRef = useRef<{\r\n    displacement: number;\r\n    controlX: number;\r\n    isInsideViewbox: boolean;\r\n  }>({\r\n    displacement: 0,\r\n    controlX: VIEWBOX_WIDTH / 2,\r\n    isInsideViewbox: false,\r\n  });\r\n\r\n  const wobbleTweenRef = useRef<gsap.core.Tween | null>(null);\r\n\r\n  const updatePath = useCallback(() => {\r\n    if (!pathRef.current) return;\r\n    const { displacement, controlX } = stateRef.current;\r\n    const controlY = baseY + displacement;\r\n    pathRef.current.setAttribute(\r\n      \"d\",\r\n      `M 0 ${baseY} Q ${controlX} ${controlY} ${VIEWBOX_WIDTH} ${baseY}`\r\n    );\r\n  }, [baseY]);\r\n\r\n  // Start damped oscillation from current displacement\r\n  const startOscillation = useCallback(() => {\r\n    // Kill any existing animation\r\n    if (wobbleTweenRef.current) {\r\n      wobbleTweenRef.current.kill();\r\n    }\r\n\r\n    const initialDisplacement = stateRef.current.displacement;\r\n    \r\n    // Don't oscillate if barely displaced\r\n    if (Math.abs(initialDisplacement) < 1) {\r\n      stateRef.current.displacement = 0;\r\n      updatePath();\r\n      return;\r\n    }\r\n\r\n    // Custom damped sinusoidal oscillation\r\n    // Formula: A * e^(-damping * t) * cos(frequency * t)\r\n    // Using cos so it starts at the current displacement\r\n    const wobbleData = { progress: 0 };\r\n    const amplitude = initialDisplacement;\r\n\r\n    wobbleTweenRef.current = gsap.to(wobbleData, {\r\n      progress: 1,\r\n      duration: duration,\r\n      ease: \"none\",\r\n      onUpdate: () => {\r\n        const t = wobbleData.progress * duration * frequency;\r\n        // Damped cosine wave: starts at amplitude, oscillates with decay\r\n        const decay = Math.exp(-damping * t * 2);\r\n        const oscillation = Math.cos(t * Math.PI * 2);\r\n        stateRef.current.displacement = amplitude * decay * oscillation;\r\n        updatePath();\r\n      },\r\n      onComplete: () => {\r\n        stateRef.current.displacement = 0;\r\n        updatePath();\r\n      },\r\n    });\r\n  }, [updatePath, damping, frequency, duration]);\r\n\r\n  useEffect(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const rect = container.getBoundingClientRect();\r\n      const relativeX = e.clientX - rect.left;\r\n      const relativeY = e.clientY - rect.top;\r\n\r\n      // Check if mouse is inside the viewbox\r\n      const isInside = \r\n        relativeX >= 0 && \r\n        relativeX <= rect.width && \r\n        relativeY >= 0 && \r\n        relativeY <= rect.height;\r\n\r\n      if (isInside) {\r\n        // Mouse is inside - pull string toward mouse position\r\n        if (!stateRef.current.isInsideViewbox) {\r\n          // Just entered the viewbox - kill any running oscillation\r\n          if (wobbleTweenRef.current) {\r\n            wobbleTweenRef.current.kill();\r\n          }\r\n          stateRef.current.isInsideViewbox = true;\r\n        }\r\n\r\n        // Calculate displacement based on mouse Y position relative to line\r\n        const lineY = (baseY / 100) * rect.height;\r\n        const distanceFromLine = relativeY - lineY;\r\n        \r\n        // Clamp displacement to maxDisplacement\r\n        const displacement = Math.max(\r\n          -maxDisplacement,\r\n          Math.min(maxDisplacement, distanceFromLine * (maxDisplacement / (rect.height / 2)))\r\n        );\r\n\r\n        // Update control point X based on mouse X position (mapped to viewbox coords)\r\n        stateRef.current.controlX = (relativeX / rect.width) * VIEWBOX_WIDTH;\r\n        stateRef.current.displacement = displacement;\r\n        updatePath();\r\n\r\n      } else if (stateRef.current.isInsideViewbox) {\r\n        // Mouse just left the viewbox - start oscillation from current displacement\r\n        stateRef.current.isInsideViewbox = false;\r\n        startOscillation();\r\n      }\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n      if (stateRef.current.isInsideViewbox) {\r\n        // Mouse left the container - start oscillation\r\n        stateRef.current.isInsideViewbox = false;\r\n        startOscillation();\r\n      }\r\n    };\r\n\r\n    container.addEventListener(\"mousemove\", handleMouseMove);\r\n    container.addEventListener(\"mouseleave\", handleMouseLeave);\r\n\r\n    return () => {\r\n      container.removeEventListener(\"mousemove\", handleMouseMove);\r\n      container.removeEventListener(\"mouseleave\", handleMouseLeave);\r\n      if (wobbleTweenRef.current) {\r\n        wobbleTweenRef.current.kill();\r\n      }\r\n    };\r\n  }, [baseY, maxDisplacement, updatePath, startOscillation]);\r\n\r\n  // Initialize path on mount\r\n  useEffect(() => {\r\n    updatePath();\r\n  }, [updatePath]);\r\n\r\n  return (\r\n    <div className={`${className}`}>\r\n    <div\r\n      ref={containerRef}\r\n      className={`text-foreground w-full cursor-pointer `}\r\n      style={{ height: `${hoverZoneHeight}px` }}\r\n    >\r\n      <svg\r\n        height=\"100%\"\r\n        width=\"100%\"\r\n        viewBox={`0 0 ${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT}`}\r\n        preserveAspectRatio=\"none\"\r\n      >\r\n        <path\r\n          ref={pathRef}\r\n          d={`M 0 ${baseY} Q ${VIEWBOX_WIDTH / 2} ${baseY} ${VIEWBOX_WIDTH} ${baseY}`}\r\n          stroke=\"currentColor\"\r\n          strokeWidth={strokeWidth}\r\n          fill=\"none\"\r\n        />\r\n      </svg>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n",
      "type": "registry:component"
    }
  ]
}