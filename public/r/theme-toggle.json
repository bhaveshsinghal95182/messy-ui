{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "theme-toggle",
  "type": "registry:component",
  "title": "Theme Toggle",
  "description": "A theme toggle button with clip-path view transition animation for smooth dark/light mode switching.",
  "dependencies": [
    "next-themes",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "registry/new-york/theme-toggle/theme-toggle.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { useTheme } from \"next-themes\";\r\nimport { flushSync } from \"react-dom\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport \"./theme-toggle.css\";\r\n\r\ninterface ThemeToggleProps {\r\n  /** Additional class names */\r\n  className?: string;\r\n}\r\n\r\nconst ThemeToggle = ({ className }: ThemeToggleProps) => {\r\n  const { setTheme, theme } = useTheme();\r\n  const ref = React.useRef<HTMLButtonElement>(null);\r\n  const [mounted, setMounted] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  async function themeToggle() {\r\n    if (!ref.current) return;\r\n\r\n    // Fallback for browsers without View Transitions API\r\n    if (!document.startViewTransition) {\r\n      setTheme(theme === \"dark\" ? \"light\" : \"dark\");\r\n      return;\r\n    }\r\n\r\n    await document.startViewTransition(() => {\r\n      flushSync(() => {\r\n        setTheme(theme === \"dark\" ? \"light\" : \"dark\");\r\n      });\r\n    }).ready;\r\n\r\n    const { top, left, width, height } = ref.current.getBoundingClientRect();\r\n    const right = window.innerWidth - left;\r\n    const bottom = window.innerHeight - top;\r\n    const maxRadius = Math.hypot(Math.max(right, left), Math.max(bottom, top));\r\n\r\n    document.documentElement.animate(\r\n      {\r\n        clipPath: [\r\n          `circle(0px at ${left + width / 2}px ${top + height / 2}px)`,\r\n          `circle(${maxRadius}px at ${left + width / 2}px ${top + height / 2}px)`,\r\n        ],\r\n      },\r\n      {\r\n        duration: 500,\r\n        easing: \"ease-in-out\",\r\n        pseudoElement: \"::view-transition-new(root)\",\r\n      }\r\n    );\r\n  }\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <button\r\n        className={cn(\"theme-toggle\", className)}\r\n        aria-label=\"Toggle theme\"\r\n        disabled\r\n      >\r\n        <span className=\"theme-toggle__icon\">\r\n          <SunIcon />\r\n        </span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      className={cn(\"theme-toggle\", className)}\r\n      onClick={themeToggle}\r\n      aria-label={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\r\n      type=\"button\"\r\n    >\r\n      <span className=\"theme-toggle__icon\">\r\n        <span className=\"theme-toggle__sun\" aria-hidden=\"true\">\r\n          <SunIcon />\r\n        </span>\r\n        <span className=\"theme-toggle__moon\" aria-hidden=\"true\">\r\n          <MoonIcon />\r\n        </span>\r\n      </span>\r\n    </button>\r\n  );\r\n};\r\n\r\nconst SunIcon = () => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 24 24\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    strokeWidth=\"2\"\r\n    strokeLinecap=\"round\"\r\n    strokeLinejoin=\"round\"\r\n    className=\"theme-toggle__svg\"\r\n  >\r\n    <circle cx=\"12\" cy=\"12\" r=\"4\" />\r\n    <path d=\"M12 2v2\" />\r\n    <path d=\"M12 20v2\" />\r\n    <path d=\"m4.93 4.93 1.41 1.41\" />\r\n    <path d=\"m17.66 17.66 1.41 1.41\" />\r\n    <path d=\"M2 12h2\" />\r\n    <path d=\"M20 12h2\" />\r\n    <path d=\"m6.34 17.66-1.41 1.41\" />\r\n    <path d=\"m19.07 4.93-1.41 1.41\" />\r\n  </svg>\r\n);\r\n\r\nconst MoonIcon = () => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 24 24\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    strokeWidth=\"2\"\r\n    strokeLinecap=\"round\"\r\n    strokeLinejoin=\"round\"\r\n    className=\"theme-toggle__svg\"\r\n  >\r\n    <path d=\"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z\" />\r\n  </svg>\r\n);\r\n\r\nexport default ThemeToggle;\r\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/theme-toggle/theme-toggle.css",
      "content": "/* Theme Toggle Component CSS - Self-contained styles */\r\n\r\n/* View Transition API - Required for clip-path animation */\r\n::view-transition-old(root),\r\n::view-transition-new(root) {\r\n  animation: none;\r\n  mix-blend-mode: normal;\r\n}\r\n\r\n.theme-toggle {\r\n  --toggle-size: 2.25rem;\r\n  --toggle-transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  \r\n  position: relative;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: var(--toggle-size);\r\n  height: var(--toggle-size);\r\n  padding: 0;\r\n  border: none;\r\n  border-radius: 0.375rem;\r\n  background: transparent;\r\n  color: currentColor;\r\n  cursor: pointer;\r\n  transition: background var(--toggle-transition);\r\n}\r\n\r\n.theme-toggle:hover {\r\n  background: oklch(0.5 0 0 / 10%);\r\n}\r\n\r\n.theme-toggle:focus-visible {\r\n  outline: 2px solid currentColor;\r\n  outline-offset: 2px;\r\n}\r\n\r\n.theme-toggle__icon {\r\n  position: relative;\r\n  width: 1.2rem;\r\n  height: 1.2rem;\r\n}\r\n\r\n.theme-toggle__svg {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.theme-toggle__sun,\r\n.theme-toggle__moon {\r\n  position: absolute;\r\n  inset: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: \r\n    opacity var(--toggle-transition),\r\n    transform var(--toggle-transition);\r\n}\r\n\r\n/* Light mode: Sun visible, Moon hidden */\r\n.theme-toggle__sun {\r\n  opacity: 1;\r\n  transform: rotate(0deg) scale(1);\r\n}\r\n\r\n.theme-toggle__moon {\r\n  opacity: 0;\r\n  transform: rotate(90deg) scale(0);\r\n}\r\n\r\n/* Dark mode: Sun hidden, Moon visible */\r\n.dark .theme-toggle__sun {\r\n  opacity: 0;\r\n  transform: rotate(-90deg) scale(0);\r\n}\r\n\r\n.dark .theme-toggle__moon {\r\n  opacity: 1;\r\n  transform: rotate(0deg) scale(1);\r\n}\r\n",
      "type": "registry:style"
    },
    {
      "path": "registry/new-york/theme-toggle/utils.ts",
      "content": "import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n",
      "type": "registry:lib"
    }
  ],
  "css": {
    "::view-transition-old(root), ::view-transition-new(root)": {
      "animation": "none",
      "mix-blend-mode": "normal"
    }
  }
}